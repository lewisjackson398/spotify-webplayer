(this["webpackJsonpreact-spotify-player"]=this["webpackJsonpreact-spotify-player"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(2),r=a.n(i),o=(a(9),a(3)),l=a.n(o);const c=["user-top-read","user-read-currently-playing","user-read-playback-state"],m=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var p=m;a(10);var u=e=>{const t={backgroundImage:"url(".concat(e.item.album.images[0].url,")")},a={width:100*e.progress_ms/e.item.duration_ms+"%"};return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"main-wrapper"},n.a.createElement("div",{className:"now-playing__img"},n.a.createElement("img",{src:e.item.album.images[0].url,alt:"spotify"})),n.a.createElement("div",{className:"now-playing__side"},n.a.createElement("div",{className:"now-playing__name"},e.item.name),n.a.createElement("div",{className:"now-playing__artist"},e.item.artists[0].name),n.a.createElement("div",{className:"now-playing__status"},e.is_playing?"Playing":"Paused"),n.a.createElement("div",{className:"progress"},n.a.createElement("div",{className:"progress__bar",style:a}))),n.a.createElement("div",{className:"background",style:t})," "))};a(11);class d extends s.Component{constructor(){super(),this.state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,no_data:!1},this.getCurrentlyPlaying=this.getCurrentlyPlaying.bind(this),this.tick=this.tick.bind(this)}componentDidMount(){let e=p.access_token;e&&(this.setState({token:e}),this.getCurrentlyPlaying(e)),this.interval=setInterval(()=>this.tick(),5e3)}componentWillUnmount(){clearInterval(this.interval)}tick(){this.state.token&&this.getCurrentlyPlaying(this.state.token)}getCurrentlyPlaying(e){l.a.ajax({url:"https://api.spotify.com/v1/me/player",type:"GET",beforeSend:t=>{t.setRequestHeader("Authorization","Bearer "+e)},success:e=>{e?this.setState({item:e.item,is_playing:e.is_playing,progress_ms:e.progress_ms,no_data:!1}):this.setState({no_data:!0})}})}render(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},!this.state.token&&n.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("880f3922e94d4edfbda22b8349231d60","&redirect_uri=").concat("http://localhost:3000/callback","&scope=").concat(c.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),this.state.token&&!this.state.no_data&&n.a.createElement(u,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}),this.state.no_data&&n.a.createElement("p",null,"You need to be playing a song on Spotify, for something to appear here.")))}}var g=d;r.a.render(n.a.createElement(g,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.6925cef5.chunk.js.map